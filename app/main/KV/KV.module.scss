@use '@/common/styles/mixins/function' as *;

.kv {
  width: 100%;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1;

  .background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  .overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      0deg,
      var(--gradient-dark-start) 30%,
      var(--gradient-dark-end) 100%
    );
    z-index: 1;
  }
  .slider {
    width: 100%;
    height: 100%;
    .buttonWrap {
      display: flex;
      gap: vw(8);
      position: absolute;
      bottom: vw(180);
      left: calc((var(--inner-padding) * 4) - vw(8));
      z-index: 10;
      width: auto;
    }
    .buttonPrev,
    .buttonNext {
      position: static;
      color: var(--text-white);
      cursor: pointer;

      i {
        --icon-size: 1.5;
        --icon-margin: 0;
        @include font-vw(36);
      }
    }
    .buttonNext {
      order: 2;
    }

    [class*='swiper-slide-active'] {
      .content__title {
        opacity: 1;
        transform: translateY(0%);
        transition:
          opacity 1s ease-in-out,
          transform 1s ease-in-out;
        transition-delay: 1s;
      }

      .content__desc {
        opacity: 1;
        transform: translateY(0%);
        transition:
          opacity 1s ease-in-out,
          transform 1s ease-in-out;
        transition-delay: 1.5s;
      }
    }
  }
  .content {
    width: 100%;
    height: 100%;
    position: relative;
    &__text {
      position: absolute;
      bottom: vw(260);
      left: 0;
      z-index: 1;
      width: 100%;
      padding-inline: calc(var(--inner-padding) * 4);
      color: var(--text-white);
    }
    &__title {
      display: flex;
      @include font-vw(72, 96, $weight: 700, $ls: -0.025);
      opacity: 0;
      transform: translateY(25%);
      transition:
        opacity 0.3s ease-out,
        transform 0.3s ease-out;
      p {
        @include ellipsis(2);
        word-break: keep-all;
      }
      i {
        --icon-size: 1.5;
        --icon-margin: 0.1;
        transform: translateY(-0.1em);
      }
    }
    &__desc {
      margin-block-start: vw(32);
      padding-block-start: vw(24);
      padding-inline-end: vw(400);
      @include font-vw(24, $weight: 500);
      opacity: 0;
      transform: translateY(25%);
      transition:
        opacity 0.3s ease-out,
        transform 0.3s ease-out;
      @include ellipsis(1);
    }
  }
  .news {
    display: flex;
    gap: vw(24);
    position: absolute;
    z-index: 1;
    bottom: vw(135);
    right: calc(var(--inner-padding) * 4);
    width: vw(300);
    height: vw(150);
    @include font-vw(18, $line: 28);
    color: var(--text-white);
    overflow: hidden; // 추가: 내용이 컨테이너를 벗어나지 않도록 함
    &__title {
      font-weight: 700;
      min-width: 0; // flex item이 내용 때문에 부모 너비를 초과하지 않도록 함
      word-break: break-all; // 긴 단어가 있을 경우 줄바꿈 강제
      overflow: hidden; // 추가: 내용이 컨테이너를 벗어나지 않도록 함
    }
    &__list {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: vw(16);
      min-width: 0; // 추가: flex item이 내용 때문에 부모 너비를 초과하지 않도록 함
      overflow: hidden; // 추가: flex item 내부 콘텐츠 오버플로우 방지
      word-break: break-all; // 추가: 긴 단어가 있을 경우 줄바꿈 강제
      max-width: 100%; // 추가: flex item이 부모 너비를 초과하지 않도록 함
      &Title {
        @include ellipsis(2);
        max-width: 100%;
        min-width: 0;
      }
      &Date {
        margin-block-start: vw(4);
        @include font-vw(14);
      }
    }
    &__link {
      display: block;
      &:hover {
        text-decoration: underline;
      }
    }
  }
  .progressBarContainer {
    position: absolute;
    bottom: vw(320);
    left: calc(var(--inner-padding) * 4);
    width: calc(100% - var(--inner-padding) * 8);
    height: vw(2);
    background-color: rgba(255, 255, 255, 0.1);
    z-index: 2;
  }

  .progressBar {
    height: vw(5);
    background-color: rgba(255, 255, 255, 1);
    transition: width 0.1s linear;
  }

  .controls {
    position: absolute;
    bottom: vw(190);
    left: calc((var(--inner-padding) * 8) - vw(24));
    z-index: 10;
    display: flex;
    align-items: center;
    gap: vw(16);
  }

  .pagination {
    .bullet {
      width: vw(8);
      height: vw(8);
      background-color: var(--text-white);
      opacity: 0.5;
      transition:
        opacity 0.3s ease,
        width 0.3s ease;
      border-radius: vw(8);
      margin: vw(5);
      cursor: pointer;
      display: inline-block;
      vertical-align: middle;
    }

    .bulletActive {
      opacity: 1;
      width: vw(36);
    }
  }

  .playPauseButton {
    background: none;
    border: none;
    color: var(--text-white);
    cursor: pointer;
    padding: 0;
    display: flex;
    align-items: center;

    i {
      opacity: 0.7;
      --icon-size: 1.3;
      --icon-margin: 0;
      @include font-vw(24);
    }
  }

  @include mq(pc-sm) {
    .slider {
      .buttonWrap {
        gap: vw(4);
        bottom: vw(230);
        left: calc((var(--inner-padding) * 2) - vw(6));
      }
      .buttonPrev,
      .buttonNext {
        i {
          --icon-size: 1.25;
          @include font-vw(32);
        }
      }
    }
    .content {
      &__text {
        bottom: vw(290);
        padding-inline: calc(var(--inner-padding) * 2);
      }
      &__title {
        @include font-vw(56);
        min-width: 0; // flex item이 내용 때문에 부모 너비를 초과하지 않도록 함
        word-break: break-all; // 긴 단어가 있을 경우 줄바꿈 강제
        overflow: hidden; // 추가: 내용이 컨테이너를 벗어나지 않도록 함
        p {
          @include ellipsis(2);
        }
        i {
          flex: 0 0 vw(56);
          --icon-size: 1;
          --icon-margin: 0.2;
          transform: translateY(0.1em);
        }
      }
      &__desc {
        margin-block-start: vw(24);
        padding-block-start: vw(16);
        padding-inline-end: 0;
        @include font-vw(18);
        @include ellipsis(1);
      }
    }
    .news {
      opacity: 0.7;
      bottom: vw(80);
      right: initial;
      left: calc(var(--inner-padding) * 2);
      width: calc(100% - var(--inner-padding) * 4);
      height: auto;
      @include font-vw(16);
      &__list {
        gap: vw(12);
        &Title {
          @include ellipsis(1);
          max-width: 100%;
          min-width: 0;
          overflow-wrap: break-word; // 추가: 긴 단어가 있을 경우 줄바꿈 강제
        }
        &Date {
          margin-block-start: vw(2);
          @include font-vw(12);
        }
      }
    }

    .progressBarContainer {
      bottom: vw(336);
      left: calc(var(--inner-padding) * 2);
      width: calc(100% - var(--inner-padding) * 4);
    }

    .controls {
      bottom: vw(236);
      left: calc((var(--inner-padding) * 2) + vw(96));
    }

    .pagination {
      .bullet {
        width: vw(6);
        height: vw(6);
        border-radius: vw(6);
      }

      .bulletActive {
        width: vw(24);
      }
    }

    .playPauseButton {
      i {
        --icon-size: 1.1;
      }
    }
  }

  @include mq(mo) {
    .slider {
      .buttonWrap {
        // bottom: vw(260);
        left: calc((var(--inner-padding) * 2) - vw(4));
      }
      .buttonPrev,
      .buttonNext {
        i {
          --icon-size: 1.25;
          @include font-vw(24);
        }
      }
    }
    .content {
      &__text {
        // bottom: vw(310);
      }
      &__title {
        @include font-vw(36);
        i {
          flex: 0 0 vw(36);
        }
      }
      &__desc {
        @include font-vw(16);
        @include ellipsis(1);
      }
    }
    .news {
      gap: vw(8);
      // bottom: vw(130);
      @include font-vw(14);
      &__list {
        &Date {
          @include font-vw(10);
        }
      }
    }

    .progressBarContainer {
      // bottom: vw(350);
    }

    .controls {
      // bottom: vw(266);
      left: initial;
      right: calc(var(--inner-padding) * 2);
    }

    .playPauseButton {
      i {
        --icon-size: 1;
        @include font-vw(20);
      }
    }
  }
}
